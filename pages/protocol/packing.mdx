import SequentialHashing from "@/components/SequentialHashing";
import Irys2dPacking from "@/components/Irys2dPacking";

# Packing

## The Problem

Decentralized storage networks incentivize miners with economic rewards to ensure data reliability and fault tolerance. Since blockchain-based storage protocols are decentralized, they must validate storage on the network without relying on a central authority. To achieve this, the protocols employ the following mechanisms:

### Cryptographic Proofs

- Miners prove they are storing data via cryptographic methods.
- These proofs validate mining outputs and incentivize storage.

### Economic Incentives

- Storage-based solutions must be more economical than compute-based approaches.
- A compute-intensive packing process ensures that storing packed data is more efficient than creating mining solutions on-demand.

### Security Measures

Cryptographic verifiability:

- Prevents miners from impersonating multiple miners.
- Prevents the multiplication of rewards for a single unit of storage.

Storage networks like Arweave and Filecoin employ processes called Packing or Sealing to verify storage. These methods require miners to add a unique cryptographic fingerprint to their storage, proving they're providing unique resources to the network. This approach prevents adversarial participants from claiming to store multiple copies of data or offering large storage capacities while only providing a fraction of the claimed resources.

Irys introduces a novel approach to packing called 2D Packing, combined with staking and slashing mechanisms. This innovative approach allows faster and more efficient storage verification compared to Arweave or Filecoin. It effectively reduces the risk of adversarial miners attempting computational exploits.

## Proving Storage Cryptographically

After storage capacity has been packed, miners must repeatedly prove to the protocol that the packed resources are available. There are two primary approaches in decentralized storage:

| **Protocol**                           | **Mechanism**                                                                                                                                                                                                                                      | **Consequence**                                                                                                  | **Drawbacks**                                                                                                                                                                                                                                                                                                                   |
| -------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Filecoin: Proof of Space-Time**      | Utilizes Zero-Knowledge (ZK) proofs where miners periodically provide random proofs compressed using ZK cryptography and post them on-chain.                                                                                                       | Failure to generate these proofs results in slashing of the miner's stake.                                       | The computationally intensive sealing process needed to generate ZK proofs increases costs and introduces overhead when storing data.                                                                                                                                                                                           |
| **Arweave: Succinct Proofs of Access** | Miners continuously generate storage proofs locally using less computationally intensive Merkle proofs until they find one that meets the network's difficulty setting. Successful proofs allow the miner to produce a new block and earn rewards. | Uses RandomX for packing, which is computationally expensive and resistant to acceleration though GPUs or ASICs. | As Arweave lacks staking, there are zero ways to penalize a miner who refuses to store data. The complexity of RandomX imposes constraints on the speed at which data can be added and requires running a full node, making it impractical to run from JavaScript. It also increases the expense of adding data to the network. |

### Irys' 2D Packing:

Irys’ 2D packing is similar to Arweave's, but scales up the packing process with 2D Packing technology instead of RandomX. 2D Packing enforces a minimum amount of time to pack but allows it to scale horizontally across GPU and/or ASICS without sacrificing security.

This approach's advantage is that it enables data to be unpacked from virtually any computing device (desktop, mobile, browser) while reducing the cost of onboarding miners to the network. It also reduces the cost of posting data on the network, which is passed on to users in the form of lower storage fees.

Irys’ approach balances the need for cryptographic verifiability with the practical considerations of accessibility and computational & cost efficiency.

## Adversarial Mining

The reason storage networks employ an expensive packing process, rather than using a cheaper fingerprinting method, is to ensure that computational mining strategies become uneconomical. These strategies, sometimes called "degenerate strategies," are approaches to mining that deviate from the protocol's intended behavior. In storage networks, the desired behavior is storing data and providing storage capacity. A degenerate strategy would involve using a GPU farm to earn mining rewards while storing very little data.

To render compute-intensive strategies uneconomical, storage networks have relied on computationally intensive packing strategies like Zero Knowledge and RandomX. However, Irys revolutionizes this approach with 2D Packing, which focuses on making the packing of each individual chunk require a specific amount of time rather than high levels of computation. This shift from a compute-focused to a time-focused approach in the packing requirements sets Irys apart from other storage networks.

## Irys 2D Packing

Irys implements its own data model which impacts the overall process of packing and proving storage.

<Irys2dPacking />

## Phase 1 - Sequential Hashing

Instead of making packing computationally intense so as to drive up its cost. Iry’s packing mechanism instead optimizes for making packing take a safe amount of time on a single CPU core. It achieves this by having the input to every segments’ SHA-256 hash be the output bytes of the previous segment in sequence. This means that computing all of the segments in a chunk must be done sequentially, giving them no advantage to being spread over multiple cores and computed in parallel.

<SequentialHashing />
