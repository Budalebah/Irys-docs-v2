import { EmaTooltip } from "@/tooltips/Tooltips";

<EmaTooltip />;

# Pricing Mechanisms

## TL; DR

- Networked storage is a commodity in today's cloud services market, with intense competition driving prices close to the physical cost of providing storage.
- Decentralized storage networks price their services using native tokens, which are subject to the volatility of cryptocurrencies.
- **Filecoin**: Uses market-driven pricing with short-term (180-540 days) storage deals requiring renegotiation due to market and tech changes.
- **Arweave**: Uses a pay-once-store-forever model with price adjustments based on miner participation, leading to potential price alignment delays.
- **Irys**: Pay-once-store-forever model tracking USD/$IRYS prices in block headers, ensuring real-time alignment with storage costs.
- **Irys Pricing Stability**: Fixed model with a 1% annual decline in costs, maintaining an ~$8.60 per GB storage price.

## Market Comparison

Networked storage is a commodity in today's cloud services market, with intense competition driving prices close to the physical cost of providing storage. Centralized storage providers benefit from stable fiat currencies and payment rails to price their services at a fixed rate.

However, decentralized storage networks must price their services using native tokens, which are subject to the volatility of cryptocurrencies. This presents a challenge in maintaining stable and competitive pricing for users, as the cost of storage may fluctuate significantly due to token volatility. Decentralized storage networks need to develop innovative pricing mechanisms to address this issue and ensure predictable and competitive costs for their users.

The decentralized storage space had established a few approaches to this pricing dilemma (pricing a stable cost in a volatile currency).

### Filecoin

Filecoin employs a market-driven approach, where storage providers commit capacity to the protocol and offer it at a rate that covers their costs and profit margins. Storage Providers compete on price, and users choose the most suitable offer to create a storage deal.

This approach has limitations, such as the restricted duration of storage deals (180-540 days on Filecoin). Longer-term storage requires renegotiating deals upon expiration, as technological advancements and market forces may significantly reduce storage costs over time. To account for these changes, there is a limit on how far in advance users can pay for storage.

### Arweave

Arweave simplifies data storage with a pay-once-store-forever model. Users pay a one-time fee, with 95% allocated to an endowment that rewards miners over time. The network uses mining participation to determine the price of its AR token and the real-world storage cost. Prices are adjusted based on the number of miners relative to the dataset size, ensuring sufficient storage capacity and network stability. When there are too many miners, prices decrease to encourage some to leave, while too few miners cause prices to increase, attracting more participants.

The main limitation of this approach is that the storage price adjusts based on the rate of miners joining and leaving, which isn't solely determined by the token price. High upfront costs make miners sticky, preventing immediate departure when the token price decreases. This results in a pricing function that lags behind the market price by weeks or months. Since 2019, the network has charged between 0.2-1.7 AR per GB, with the AR token price varying between $2-50, leading to storage costs ranging from $5 to $40 per GB in USD terms.

### Irys

Irys uses a pay-once-store-forever model like Arweave, making it easy to develop and build onchain applications. However, Irys tracks the $IRYS token price differently by allowing miners to include the current USD/$IRYS price in the blocks they produce. As long as the price quotes are within a reasonable range, other miners accept the block. This approach enables the $IRYS price to be tracked at the rate of block production rather than the rate of miners leaving or joining the network, keeping Irys pricing close to the physical cost of storing data.
The protocol assumes a fixed pricing model for the current GB cost of storage and projects a 1% annual decline in storage costs. By using an <a className="underline decoration-dashed" id="ema">exponential moving average</a> of the $IRYS token price accepted and recorded in block headers, the protocol maintains a storage price of ~$8.60 per GB, regardless of the current $IRYS price.

## Irys Pricing

### Key Elements:

1. **Annualized Cost Assessment**: Pricing is anchored in an accurate assessment of the current annualized cost of storing data, denominated in USD. This assessment will take into account factors such as hardware costs, power consumption, and drive failure rates.
2. **Future Cost Projection**: A conservative and safe model will be used to project future storage costs over an extended period based on the current annualized cost. The model will assume a modest 1% annual decay rate in storage costs, accounting for a wide range of potential technological advancements and market conditions.
3. **$IRYS Token Price**: The protocol will provide the ability to quote the price of storage in the native $IRYS token. This will be achieved by maintaining an approximate USD/$IRYS exchange rate and adjusting the $IRYS price based on the projected USD storage cost.

### Essential Functions:

1. **$IRYS Token Price Determination**: The protocol will include a reliable mechanism to approximate the current USD price of the $IRYS token. This will be achieved through a mechanism similar to the one used to track time for difficulty adjustments in PoW blockchains. The determined price will be used to set the one-time storage fee in $IRYS tokens, ensuring users pay a consistent USD-equivalent amount.
2. **Annualized Cost Adjustment**: This mechanism periodically adjusts the annualized cost of storing data based on new market conditions and technological advancements. Approximately once a year (measured in block height), there is a 2-week window (also measured in block heights) during which miners post their annualized cost in the headers of the blocks they produce. At the end of this two-week interval, the median cost is chosen as the basis for the pricing model in the upcoming year. Without these adjustments, the protocol would have to rely on its pricing model, which, due to built-in safety margins, is likely to significantly overcharge in future years.

### Pricing Model Parameters:

1. **Annualized Cost of Storing 1GB**: The pricing model will use the annualized cost of storing 1GB, as determined by the protocol parameter, as its starting point.
2. **Annualized Decay Rate**: The model will assume a conservative 1% annual decay rate in storage costs, accounting for potential improvements in technology and market efficiency over time.
3. **Safe Minimum Number of Years**: The pricing model will calculate the one-time storage fee based on a safe minimum number of years, initially set to 200 years. This ensures that the fee charged is sufficient to cover storage costs for an extended period, providing peace of mind to users. The safety margins baked into the pricing model mean that in all but the very worst of outcomes the network can afford to pay for storage many multiples of 200 years into the future.

### Protocol Parameters:

1. **Annualized Cost of Storing 1GB**: The current annualized cost of storing 1GB of data, denominated in USD, will be maintained as a protocol parameter. This parameter will be used as the basis for the pricing model and will be adjusted periodically through hard forks.
2. **Approximate USD/$IRYS Price**: The protocol will maintain an approximate USD/$IRYS exchange rate as a parameter. This rate will be updated dynamically using the price adjustment interval mechanism, ensuring that storage prices remain stable in USD terms.

### Protocol Mechanisms:

1. **Price Adjustment Interval**: The protocol will implement a price adjustment interval mechanism to update the approximate USD/$IRYS price periodically. This mechanism will use an exponential moving average of recent prices, weighted towards more recent data, to smoothly track changes in the exchange rate.
2. **Annualized Cost Adjustments**: Periodic hard forks will be used to adjust the annualized cost of storing 1GB based on new market conditions and technological advancements. These hard forks will require consensus among network participants, ensuring that the adjustments are widely accepted and maintain the integrity of the permanent storage pricing model.
